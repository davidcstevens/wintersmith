var browserify = require('browserify');

var b = browserify([__filename]);

b.transform(function(file) {
  throw new Error('This happend');
});

try {
  var stream = b.bundle();
} catch (error) {
  console.log('bundle error');
}


b.on('error', function(){
  console.log('stream error?');
});
stream.on('error', function(){
  console.log('stream error?');
});

try {
  stream.pipe(process.stdout);
} catch (error) {
  console.log('error?');
}
process.on('uncaughtException', function(err) {
  console.log('Caught exception: ' + err);
});
